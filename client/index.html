<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TEXID</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./src/style.css" />
  </head>
  <body>
    <!-- Barre sup√©rieure (affich√©e en jeu) -->
    <header id="topbar" class="topbar hidden" role="banner">
      <div class="brand"><h1 class="app-title">TEXID</h1></div>
      <div class="controls">
  <button id="btn-new" class="btn hidden" title="Nouvelle partie" aria-label="Nouvelle partie">
          <svg class="ico" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M11 4h2v6h6v2h-6v6h-2v-6H5v-2h6z"/></svg>
        </button>
        <!-- Bouton IA (Training) ‚Äî appara√Æt uniquement en Training -->
        <button id="easy-btn" class="btn hidden" aria-haspopup="menu" aria-expanded="false" title="IA (Training)">
          <!-- Ic√¥ne Power -->
          <svg class="ico" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2a1 1 0 011 1v8a1 1 0 11-2 0V3a1 1 0 011-1zm5.657 3.343a1 1 0 011.414 1.414A8 8 0 1112 4a1 1 0 110 2 6 6 0 106.657-.657z"/></svg>
          <span class="visually-hidden">IA Training</span>
        </button>
        <div id="ai-dd" class="ai-dd hidden" role="menu" aria-label="Profil IA (Training)">
          <button class="ai-opt" role="menuitemradio" aria-checked="true" data-value="off" title="D√©sactiver l‚Äôassistance"><span class="ai-ico">‚èª</span><span class="ai-lab">Off</span></button>
          <button class="ai-opt" role="menuitemradio" aria-checked="false" data-value="prudent" title="√âviter trous et surplombs"><span class="ai-ico">üß±</span><span class="ai-lab">Prudent</span></button>
          <button class="ai-opt" role="menuitemradio" aria-checked="false" data-value="conservateur" title="Empilement s√ªr"><span class="ai-ico">üõ°Ô∏è</span><span class="ai-lab">Conservateur</span></button>
          <button class="ai-opt" role="menuitemradio" aria-checked="false" data-value="equilibre" title="Compromis"><span class="ai-ico">‚öñÔ∏è</span><span class="ai-lab">√âquilibr√©</span></button>
          <button class="ai-opt" role="menuitemradio" aria-checked="false" data-value="agressif" title="Favorise clears 3+ et Tetris"><span class="ai-ico">üî•</span><span class="ai-lab">Agressif</span></button>
        </div>
        <button id="btn-top10" class="btn" title="Top 10" aria-label="Top 10">
          <svg class="ico" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M9 21V8h6v13H9zm8 0V4h4v17h-4zM3 21v-9h4v9H3z"/></svg>
        </button>
        <button id="btn-help" class="btn" title="Aide" aria-label="Aide">
          <svg class="ico" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92A3.5 3.5 0 0013 14h-2v-.5c0-.83.34-1.58.88-2.12l1.24-1.26a1.5 1.5 0 10-2.12-2.12c-.4.4-.62.94-.62 1.5H8a4 4 0 117.07 2.37z"/></svg>
        </button>
        <button id="btn-exit" class="btn danger" title="Quitter" aria-label="Quitter">
          <svg class="ico" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M10 17l5-5-5-5v10zm-6-9h2v8H4V8zm12-6H8a2 2 0 00-2 2v2h2V4h8v16H8v-2H6v2a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2z"/></svg>
        </button>
      </div>
    </header>
    <!-- Drawer Cr√©dits (lat√©ral droit) -->
    <div id="drawer-credits" class="drawer" aria-hidden="true" aria-labelledby="credits-title">
      <div class="drawer-backdrop" data-close="true"></div>
      <aside class="drawer-panel" role="dialog" aria-modal="true">
        <header class="drawer-header">
          <h2 id="credits-title">Cr√©dits</h2>
          <button id="drawer-credits-close" class="btn" aria-label="Fermer">Fermer</button>
        </header>
        <div class="drawer-body">
          <ul class="credits-list">
            <li><strong>Soci√©t√© :</strong> Epixid</li>
            <li><strong>D√©veloppeur :</strong> Khamphou</li>
            <li><strong>Contact :</strong> contact@epixid.com</li>
            <li><strong>Site :</strong> <a href="https://epixid.com" target="_blank" rel="noopener">epixid.com</a></li>
          </ul>
          <div id="credits-desc-slot"></div>
        </div>
      </aside>
    </div>

    <!-- √âcran d'accueil (hero) -->
    <section id="screen-start" class="screen active">
      <div class="hero">
        <canvas id="hero-bg" class="hero-bg" aria-hidden="true"></canvas>
        <div class="hero-veil"></div>
        <canvas id="hero-fx" class="hero-fx" aria-hidden="true"></canvas>
        <div class="hero-content">
          <div class="logo-wrap" aria-label="TEXID">
            <img width="200" src="/assets/images/logo-texid.png" alt="TEXID" class="logo-img" onload="this.style.display='block'; this.nextElementSibling?.classList.add('hidden');" onerror="this.style.display='none'; this.nextElementSibling?.classList.remove('hidden');" />
            <svg class="logo hidden" viewBox="0 0 680 180" role="img" aria-labelledby="logo-title">
              <title id="logo-title">TEXID</title>
              <defs>
                <linearGradient id="g" x1="0" x2="1">
                  <stop offset="0%" stop-color="#7dd3fc"/>
                  <stop offset="100%" stop-color="#38bdf8"/>
                </linearGradient>
                <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="4" result="b"/>
                  <feMerge>
                    <feMergeNode in="b"/>
                    <feMergeNode in="SourceGraphic"/>
                  </feMerge>
                </filter>
              </defs>
              <text x="50%" y="58%" text-anchor="middle" class="logo-fill">TEXID</text>
              <text x="50%" y="58%" text-anchor="middle" class="logo-stroke">TEXID</text>
            </svg>
          </div>
          <div class="hero-actions">
            <button id="btn-start-solo" class="btn primary lg">Solo</button>
            <button id="btn-start-training" class="btn lg">Training <span class="badge-easy">Easy</span></button>
            <button id="btn-start-arcade" class="btn lg disabled" title="Bient√¥t disponible">Arcade <span class="badge-soon">Bient√¥t</span></button>
            <button id="btn-start-multi" class="btn lg">Multijoueur</button>
            <button id="btn-hero-top10" class="btn lg ghost">Top 10</button>
            <button id="btn-credits" class="btn lg ghost">Cr√©dits</button>
          </div>
          <p class="start-tip"></p>
        </div>
        <div class="hero-footer" title="Infos d√©veloppeur">
          <span class="hf-line">Powered by Kham</span>
          <span class="hf-sep">‚Ä¢</span>
          <span class="hf-line">Epixid</span>
          <span class="hf-sep">‚Ä¢</span>
          <span class="hf-line">08‚Äë08‚Äë2025</span>
          <span class="hf-sep">‚Ä¢</span>
          <span class="hf-line">v1.0</span>
        </div>
      </div>
    </section>

    <!-- Racine de l‚Äôapp canvas -->
    <div id="app-root"></div>

    <!-- Modale Top 10 -->
    <dialog id="dlg-top10" class="modal">
      <div class="modal-content">
        <div class="hero-top10-header">
          <h3>Top 10</h3>
          <div class="tabs tabs-compact" role="tablist" aria-label="Classements">
            <button id="tab-top-solo" class="tab active" role="tab" aria-selected="true" aria-controls="top10-solo">Solo</button>
          </div>
          <button id="top10-close-x" class="btn" aria-label="Fermer"></button>
        </div>
        <div class="tabpanes">
          <div id="top10-solo" role="tabpanel" aria-labelledby="tab-top-solo">
            <ol id="top10-modal-solo" class="top10 neon"></ol>
          </div>
        </div>
      </div>
    </dialog>

    <!-- Modale Aide / Contr√¥les -->
    <dialog id="dlg-help" class="modal">
      <div class="modal-content">
        <h3>Aide & Contr√¥les</h3>
        <div class="help-body">
          <ul>
            <li>‚Üê ‚Üí: d√©placer</li>
            <li>‚Üë: rotation</li>
            <li>‚Üì: descente</li>
            <li>Espace: chute</li>
            <li>C / Shift: hold</li>
            <li>P: pause</li>
          </ul>
          <div class="help-callout" role="note" aria-label="Astuce de contr√¥le souris/tactile">
            <strong>Astuce souris/tactile</strong> ‚Äî Clic/Tap = <em>rotation</em> ‚Ä¢ Double clic/tap = <em>chute</em> ‚Ä¢ Glisser = <em>d√©placer</em> ‚Ä¢ Clic sur la 1re pi√®ce ‚ÄúNEXT‚Äù = <em>HOLD</em>.
          </div>
          <p class="small">Astuce: activez le Mode Easy pour les guides de projection.</p>
        </div>
        <menu>
          <button id="help-close" class="primary">Fermer</button>
        </menu>
      </div>
    </dialog>

    <script type="module" src="./src/main.js"></script>
  </body>
  
</html>
