/* Feuille de styles complète issue de la version legacy, adaptée au client modulaire */
*{box-sizing:border-box}
/* Ne pas donner 100% de hauteur à #app-root pour éviter un écran vide sous le hero */
html,body{height:100%}
body{
	margin:0;
	font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
	background: radial-gradient(1200px 800px at 20% 20%, #121418, transparent 60%),
							radial-gradient(1000px 800px at 80% 30%, #0f1115, transparent 55%),
							#0b0f14;
	color:#e5e7eb;
}
canvas{display:block}
/* Le canvas doit occuper toute la fenêtre visible lorsque le jeu est actif */
#app-root>canvas{position:fixed; inset:0; width:100vw !important; height:100vh !important;}
/* Laisser la topbar au-dessus */
#topbar{z-index: 1000}

/* Drawer latéral (Crédits) */
.drawer{ position: fixed; inset: 0; z-index: 1200; display: block; pointer-events: none; opacity: 0; transition: opacity .18s ease; }
.drawer[aria-hidden="true"]{ opacity: 0; pointer-events: none; }
.drawer.open{ opacity: 1; pointer-events: auto; }
.drawer .drawer-backdrop{ position:absolute; inset:0; background: rgba(0,0,0,.55); -webkit-backdrop-filter: blur(2px); backdrop-filter: blur(2px); opacity: 0; transition: opacity .18s ease; }
.drawer.open .drawer-backdrop{ opacity: 1; }
.drawer .drawer-panel{ position: absolute; top:0; right:0; height:100%; width:min(520px, 92vw); background: linear-gradient(120deg, #181a1f 80%, #23272f 100%); border-left: 1px solid #23272f; box-shadow: -20px 0 80px rgba(0,0,0,.5); transform: translateX(100%); transition: transform .28s cubic-bezier(.22,.61,.36,1); display:flex; flex-direction:column; }
.drawer.open .drawer-panel{ transform: translateX(0); }
.drawer .drawer-header{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:14px 16px; border-bottom:1px solid #20242c; }
.drawer .drawer-header h2{ margin:0; font-family: Orbitron, system-ui; color:#7dd3fc; font-size:20px }
.drawer .drawer-body{ padding:14px 16px; overflow:auto; display:flex; flex-direction:column; gap:12px }
.drawer .credits-list{ list-style: none; padding: 0; margin: 0 0 18px 0; }
.drawer .credits-list li { margin-bottom: 8px; font-size: 16px; }

/* Hero plein écran */
.screen.active{display:block}
.screen{display:none}
.hero{position:relative; height: 100vh; min-height:100vh; max-height:none; border:1px solid #20242c; border-radius:16px; overflow:hidden; box-shadow:inset 0 1px 0 rgba(255,255,255,.04), 0 30px 80px rgba(0,0,0,.35);}
.hero::before{content:""; position:absolute; inset:0; z-index:0; pointer-events:none;
	background:
		url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/><feColorMatrix type='saturate' values='0'/><feComponentTransfer><feFuncA type='linear' slope='0.05'/></feComponentTransfer></filter><rect width='100%' height='100%' filter='url(%23n)'/></svg>") repeat,
		radial-gradient(1100px 700px at 20% 20%, rgba(18, 38, 36, 0.55), transparent 60%),
		radial-gradient(900px 600px at 80% 35%, rgba(16, 24, 34, 0.55), transparent 55%),
		radial-gradient(800px 500px at 60% 80%, rgba(56,189,248,.08), transparent 70%),
		linear-gradient(180deg, rgba(0,0,0,.65), rgba(0,0,0,.88));
	background-color:#0b0f14;
	background-size:auto, auto, auto, auto, auto;
}
.hero-bg{position:absolute; inset:0; width:100%; height:100%; display:block; background: transparent !important; z-index:1; transform: translate3d(calc(var(--px,50) * -0.2px), calc(var(--py,50) * -0.2px), 0); pointer-events:auto;}
.hero-veil{position:absolute; inset:0; pointer-events:none; background:
		radial-gradient(900px 500px at 60% 80%, rgba(56,189,248,.12) 0%, transparent 70%),
		radial-gradient(600px 400px at 30% 20%, rgba(255,255,255,.06) 0%, transparent 80%),
		linear-gradient(180deg, rgba(0,0,0,.38), rgba(0,0,0,.62));
	z-index:2}
.hero-fx{position:absolute; inset:0; width:100%; height:100%; display:block; pointer-events:none; z-index:3; background: transparent !important; border-radius: 0}
.hero-content{position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:12px; padding:20px; text-align:center; transform: perspective(800px) rotateX(calc((var(--py,50) - 50)*0.08deg)) rotateY(calc((var(--px,50) - 50)*-0.08deg)); transition: transform .08s ease; pointer-events:auto; z-index:5}
.logo-wrap{position:relative; width:min(80vw, 720px); display:flex; align-items:center; justify-content:center}
.hero-content .logo-wrap{margin-bottom: clamp(12px, 3vh, 28px)}
.logo, .logo-img{width:100%; height:auto}
.logo, .logo-img{width:auto; max-width:90%; height:auto}
.logo{filter:url(#glow)}
.logo-img{filter: drop-shadow(0 10px 50px rgba(0,0,0,.5)); animation: float 6s ease-in-out infinite; max-height: clamp(140px, 28vh, 360px);}
.logo-wrap::after{content:""; position:absolute; inset:auto 10% 8% 10%; height:14px; border-radius:999px; background:radial-gradient(ellipse at center, rgba(56,189,248,.18), transparent 60%); filter: blur(10px); opacity:.6; animation: halo 3.6s ease-in-out infinite}
.logo.hidden{display:none}
.logo-fill{fill:url(#g); font: 700 120px Orbitron, system-ui; letter-spacing:.18em}
.logo-stroke{fill:none; stroke:#a3b9c9; stroke-width:10; opacity:.22}
.hero-actions{display:flex; flex-direction:column; align-items:center; gap:10px; justify-content:center; margin:8px 0 6px}
.btn{background:linear-gradient(180deg,#1e232b,#12151a);border:1px solid #2a2f37;color:#cdd3dd;border-radius:10px;padding:7px 10px;cursor:pointer; transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease, color .12s ease}
.btn:hover{border-color:#3a404b;color:#fff;box-shadow:0 0 0 2px rgba(56,189,248,.15); transform: translateY(-1px)}
.btn:active{transform: translateY(0)}
.btn.lg{padding:12px 18px; font-size:15px; border-radius:12px}
.btn.primary{background:linear-gradient(180deg,#0b6b9e,#0a4e74); border:1px solid #0c82c1; color:#eaf6ff}
.btn.ghost{background:linear-gradient(180deg,#1e232b,#12151a); border:1px dashed #2a2f37; color:#cdd3dd}
.btn.disabled{ opacity: 0.5; pointer-events: none; filter: grayscale(0.5) brightness(0.7); }
.badge-easy{ background: linear-gradient(90deg, #38bdf8 60%, #7dd3fc 100%); color: #0a0b0c; font-size: 12px; font-weight: 700; border-radius: 8px; padding: 2px 8px; margin-left: 6px; box-shadow: 0 2px 8px rgba(56,189,248,.18); }
.badge-soon{ background: linear-gradient(90deg, #23272f 60%, #7dd3fc 100%); color: #7dd3fc; font-size: 12px; font-weight: 700; border-radius: 8px; padding: 2px 8px; margin-left: 6px; box-shadow: 0 2px 8px rgba(56,189,248,.18); opacity: 0.7; }
.hero-footer{position:absolute; left:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center; gap:10px; padding:10px; color:#b2bcc9; font-size:12px; letter-spacing:.06em; background:linear-gradient(180deg, transparent, rgba(0,0,0,.55)); border-top:1px solid rgba(255,255,255,.06); z-index:6; text-shadow:0 1px 8px rgba(0,0,0,.6)}
.hero-footer .hf-line{opacity:.9}
.hero-footer .hf-sep{opacity:.6}

@keyframes float{ 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-4px) } }
@keyframes halo{ 0%,100%{ opacity:.5 } 50%{ opacity:.7 } }

/* Topbar (menu du haut en jeu) */
.topbar{position:fixed; inset:0 0 auto 0; height:48px; display:flex; align-items:center; justify-content:space-between; padding:8px 10px; gap:10px; background:linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.2)); border-bottom:1px solid rgba(255,255,255,.06); z-index:20; -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px)}
.topbar.hidden{display:none}
.topbar .app-title{font-family:Orbitron,system-ui;font-weight:700;letter-spacing:.16em;color:#e5e7eb; margin:0; font-size:16px}
.topbar .controls{display:flex; align-items:center; gap:8px}
.topbar .btn{background:linear-gradient(180deg,#1e232b,#12151a);border:1px solid #2a2f37;color:#cdd3dd;border-radius:10px;padding:7px 10px;cursor:pointer}
.topbar .btn:hover{border-color:#3a404b;color:#fff;box-shadow:0 0 0 2px rgba(56,189,248,.15)}
.topbar .btn.danger{background:linear-gradient(180deg,#ef4444,#b91c1c);border:1px solid #7f1d1d;color:#fff}

/* Modales (héritées du style legacy condensed) */
.modal{border:none; padding:0; background:transparent}
.modal::backdrop{background:rgba(0,0,0,.55); -webkit-backdrop-filter: blur(2px); backdrop-filter: blur(2px)}
.modal .modal-content{background:linear-gradient(180deg,#0f1318,#0b0e12);border:1px solid #242933;border-radius:12px;padding:16px;min-width:280px;color:#d6dbea;box-shadow:0 20px 80px rgba(0,0,0,.55)}
.modal .tabs-compact .tab{background:linear-gradient(180deg,#1e232b,#12151a);border:1px solid #2a2f37;color:#cdd3dd;border-radius:999px;padding:6px 10px;cursor:pointer;font-size:12px}
.modal .tabs-compact .tab.active{border-color:#3a404b;color:#fff;box-shadow:0 0 0 2px rgba(56,189,248,.15)}
.modal .modal-content h3{margin:0 0 8px 0; font-family: Orbitron, system-ui; color:#7dd3fc}
.modal menu{display:flex; gap:8px; justify-content:flex-end; margin-top:12px}
.modal .primary{background:#0b6b9e;border:1px solid #0c82c1;color:#eaf6ff;border-radius:8px;padding:8px 12px}
/* Callout aide */
.help-callout{margin:10px 0; padding:10px 12px; border:1px solid rgba(56,189,248,.25); background:linear-gradient(180deg, rgba(56,189,248,.08), rgba(56,189,248,.04)); color:#dbeafe; border-radius:10px}
.help-callout strong{color:#7dd3fc}
.help-callout em{font-style:normal; color:#eaffff}
/* utils */
.hidden{display:none}

#easy-btn { margin-left: auto; padding-right: 16px; }
#easy-btn.active { background: #0ea5e9; color: #fff; }
#easy-btn.easy-prudent { box-shadow: 0 0 0 2px #22c55e inset; }
#easy-btn.easy-conservateur { box-shadow: 0 0 0 2px #a3e635 inset; }
#easy-btn.easy-equilibre { box-shadow: 0 0 0 2px #38bdf8 inset; }
#easy-btn.easy-agressif { box-shadow: 0 0 0 2px #f97316 inset; }

/* Indicateur dropdown: petite flèche en bas à droite du bouton */
#easy-btn{ position: relative; }
#easy-btn::after{
	content: "";
	position: absolute; right: 8px; bottom: 6px; width: 0; height: 0;
	border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 6px solid currentColor;
	opacity: .85; pointer-events: none;
}

.dropdown { position: fixed; min-width: 180px; background: rgba(20,20,24,0.96); color: #eee; border: 1px solid rgba(255,255,255,0.12); border-radius: 8px; padding: 6px; z-index: 50; box-shadow: 0 10px 28px rgba(0,0,0,0.35); }
.dropdown.hidden { display: none; }
.dropdown .ai-opt { padding: 8px 10px; border-radius: 6px; cursor: pointer; }
.dropdown .ai-opt:hover { background: rgba(56,189,248,0.15); }

.topbar { position: fixed; top: 0; left: 0; right: 0; height: 48px; display: flex; align-items: center; gap: 8px; padding: 6px 10px; background: rgba(0,0,0,0.45); -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px); z-index: 40; }
.topbar .btn.hidden { display: none; }
.hero { margin-top: 64px; }

/* Menu IA (mêmes styles que legacy) */
.ai-dd{position:fixed; z-index:1000; margin-top:0; padding:6px; border:1px solid #242933; border-radius:12px; background:linear-gradient(180deg,#0f1318,#0b0e12); box-shadow:0 20px 80px rgba(0,0,0,.55)}
.ai-dd.hidden{display:none}
.ai-dd .ai-opt{display:flex; align-items:center; gap:8px; width:100%; text-align:left; padding:10px 12px; border:1px solid transparent; border-radius:10px; background:transparent; color:#e5e7eb; cursor:pointer}
.ai-dd .ai-opt .ai-ico{width:18px; display:inline-flex; justify-content:center}
.ai-dd .ai-opt .ai-lab{flex:1}
.ai-dd .ai-opt[aria-checked="true"]{background:linear-gradient(180deg,#1e232b,#151920); border-color:#2a2f37; box-shadow:inset 0 0 0 1px rgba(56,189,248,.12)}
.ai-dd .ai-opt:hover, .ai-dd .ai-opt:focus-visible{border-color:#3a9bd9; color:#fff; background:linear-gradient(180deg, rgba(14,165,233,.18), rgba(14,165,233,.08)); box-shadow:0 0 0 3px rgba(56,189,248,.16)}

/* Petit connecteur visuel du menu IA avec le bouton (écart 4px) */
.ai-dd.connector{ position: fixed; }
.ai-dd.connector::before{ content:""; position:absolute; top:-6px; right:12px; width:12px; height:10px; background: linear-gradient(180deg,#0f1318,#0b0e12); border-left:1px solid #242933; border-top:1px solid #242933; border-right:1px solid transparent; border-bottom:1px solid transparent; transform: skewX(35deg); border-top-left-radius:6px; box-shadow: -2px -2px 6px rgba(0,0,0,.25); }
